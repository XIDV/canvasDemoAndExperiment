<!DOCTYPE HTML>
<html lang="de">

<!--                                                      head-section -->
    <head>
        <title>Das canvas-Element</title>

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Sebastian Peschl">
        <meta name="description" content="Demos und Experimente mit dem canvas-Element.">
        <meta name="generator" content="Visual Studio Code">
        
        <link rel="shortcut icon" href="src/media/img/XIDV_Logo_final.svg" type="image/x-icon">
        <link rel="stylesheet" href="/src/css/style.css">

    </head>

<!--                                                      body-section -->
    <body>
        <div id="pageWrapper">
            <header id="pageHeader">
                <div id="headerTitle">Das <code>canvas</code>-Element</div>
                <div id="headerSubtitle">Demos und Experimente mit dem canvas-Element.</div>
            </header>

            <!-- <nav id="mainNav"></nav> -->

            <main>
                
                <section class="mainContent" id="primaryContent">
                    <header class="sectionHeader">
                        <h1 class="sectionTitle">Bitmap-Grafiken dynamisch erstellt</h1>
                        <div class="sectionSubtitle"><!-- INSERT SUBTITLE HERE --></div>
                    </header>
                    <div class="sectionContentText">
                        <p>
                            Das <code>canvas</code>-Element stellt quasi eine Programmierschnittstelle zum dynmaischen erstellen und anzeigen von Pixelgrafiken bereit. Der eigentliche Content wird via JavaScript erstellt. Es stellt einen Gegensatz zum SVG-Format dar, welches XML-basiert ist.
                        </p>
                    </div>
                </section>

                <section class="mainContent">
                    <header class="sectionHeader">
                        <h2 class="sectionTitle">Beispiele</h2>
                        <div class="sectionSubtitle"><!-- INSERT SUBTITLE HERE --></div>
                    </header>
                    <div class="sectionContentText">
                        <p>
                            <!-- INSERT CONTENT HERE -->
                        </p>
                    </div>

                    <article class="demoBox" id="bsplOneA">
                        <header class="demoBoxHeader">
                            <h3 class="artTitle">Beispiel 1a</h3>
                            <div class="artSubtitle">Linien und einfache Formen in einem <code>canvas</code>-Elment mit fester Breite und Höhe.</div>
                        </header>
                        <div class="sandboxContainer">

                            <canvas id="bspl1aCanvas" width="400" height="200">
                                <p>
                                    Ihr Browser unterstützt das <code>canvas</code>-Elment nicht.
                                </p>
                            </canvas>

                        </div>
                        
                        <div class="infoBox">
                            <details>
                                <summary>
                                    Rechteck, Quadrat und zwei Pfade aus Linien.
                                </summary>
                                <p>
                                    Zum erstellen des grünen Rechtecks wird zuerst der Wert des <code>fillStyle</code>-Attributs des CanvasRenderingContext2D-Objektes (<code>context</code>) mittels Angabe eines HSLA-Wertes eingestellt. <br>
                                    Anschließend wird die Methode <code>fillFrect()</code> aufgerufen. Dieser werden vier Parameter übergeben. Die ersten beiden sind die Startkoordianten (x/y), die nächsten zwei (hier 360 und 80) sind <strong>Längenangaben</strong>, jeweils in x- und y-Richtung. <strong>Das sind <u>keine</u> Endkoordinaten</strong>! <br>
                                    Die rechnerischen Endkoordinaten wären in diesem Fall (20 + 360 und 20 + 80) <strong>x=380 und y=100</strong>.
                                </p>
                            </details>
                        </div>

                    </article>

                    <article class="demoBox" id="bsplOneB">
                        <header class="demoBoxHeader">
                            <h3 class="artTitle">Beispiel 1b</h3>
                            <div class="artSubtitle">Text und Logo</div>
                        </header>
                        <div class="sandboxContainer">

                            <canvas id="bspl1bCanvas" width="500" height="80">
                                <p>
                                    Ihr Browser unterstützt das <code>canvas</code>-Elment nicht.
                                </p>
                            </canvas>

                        </div>
                        
                        <div class="infoBox">
                            <details>
                                <summary>
                                    Ausgabe von Text, einm Pfad bestehend aus Linien, sowie ein Rechteck und ein Dreieck
                                </summary>
                                <p>
                                    Für die Ausgabe von Text wird zuerst die Füllfarbe via <code>fillStyle</code>, der Font via <code>font</code> sowie die Grundlinie via <code>textBaseline</code> definiert.
                                </p>
                                <p>
                                    Die Ausgabe des Pfades durch Linien wird wie zuvor bei Beispiel 1A realisiert.
                                </p>
                                <h4>Ausgabe eines Rechtecks</h4>
                                <p>Hier wird im Vorfeld mit <code>save()</code> der Zeichenstatus (drawing state) gespeichert, welcher später mit <code>restore() wiederhergestellt werden kann.</code><br>Welche Eigenschaften des CanvasRenderingContext2D alle gespeichert werden können entnehmen Sie bitte <a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/save" target="_blank">hier</a> der Dokumentation.</p>
                                <p>Außerdem wird vor der Ausgabe des Rechtecks mit <code>translate()</code> der der Canvas (und dessen Koordiantenursprung) entsprechend der spezifizierten Werte verschoben.</p>
                                <p>Der Ursprung des Rechtecks, welches nun ausgegeben wird befindet sich (relativ gesehen) bei x=0, y=0. Berücksichtigt man jedoch die zuvor durchgefürte Verschiebung des Canvas, so befindet sich der Ursprung des Rechtecks (global betrachtet) bei x=20, y=4.</p>
                                
                                <h4>Ausgabe eines Dreiecks</h4>
                                <p>Nach der Definition einer Füllfarbe und und einer Linienstärke mit <code>lineWidth = 1;</code>, wobei letzteres eigentlich überflüssig ist, da im Folgenden keine Kontur, sondern eine dreieckige Fläche ausgegeben wird, erfolgt eine weitere Speicherung des Zeichenstatus des Canvas.</p>
                                <p>Nach einer weiteren Verschiebung des CanvasRenderingContext2D wird mit <code>beginPath()</code> mit der Definition eines neuen Pfades begonnen. <br> Auf <code>moveTo(0, 0)</code> <strong><u>oder</u></strong> <code>lineTo(0, 0)</code> könnte in diesem Fall verzichtet werden.</p>
                                <p>Mit <code>fill()</code> wird die dreieckige Fläche auf den Canvas gezeichnet und mit <code>closePath()</code> die Pfaderstellung beendet</p>
                                <p>Abschließend wird der CanvasRenderingContext2D auf den letzten Wiederherstellungspunkt zurückgesetzt. Es gelten nun also wieder die Parameter wie bei der Erstellung des Rechtecks.</p>
                            </details>
                        </div>

                    </article>

                    <article class="demoBox" id="bsplOneC">
                        <header class="demoBoxHeader">
                            <h3 class="artTitle">Beispiel 1c</h3>
                            <div class="artSubtitle">Animation von Canvas (unter Verwendung von <code>setInterval()</code>)</div>
                        </header>
                        <div class="sandboxContainer">

                            <canvas id="bspl1cCanvas" width="400" height="300">
                                <p>
                                    Ihr Browser unterstützt das <code>canvas</code>-Elment nicht.
                                </p>
                            </canvas>

                        </div>
                        
                        <div class="infoBox">
                            <p>Hier wird ein Farbwechsel und eine kontinuierliche Vergrößerung und Verkleinerung des Quadrates mit <code>setInterval()</code> realisiert. Dieser Ansatz in jedoch nicht zweckmäßig.</p>
                            <p>Im folgenden Beispiel wird auf die Methode <code>requestAnimationFrame()</code> zurückgegriffen, welche für diese Aufgabe besser geeignet ist.</p>
                        </div>

                    </article>

                    <article class="demoBox" id="bsplOneD">
                        <header class="demoBoxHeader">
                            <h3 class="artTitle">Beispiel 1d</h3>
                            <div class="artSubtitle">Animation von Canvas (unter Verwendung von <code>requestAnimationFrame()</code>)</div>
                        </header>
                        <div class="sandboxContainer">

                            <canvas id="bspl1dCanvas" width="400" height="300">
                                <p>
                                    Ihr Browser unterstützt das <code>canvas</code>-Elment nicht.
                                </p>
                            </canvas>
                            <button type="button" id="stopBspl1dAnim">Stop Animation!</button>
                            <p>(Seite neuladen f. Neustart d. Animation)</p>
                        </div>
                        
                        <div class="infoBox">
                            <details>
                                <summary>
                                    Animierte Anzeige der akutellen Zeit innerhalb eines <code>canvas</code>-Elements.
                                </summary>
                                <p>
                                    Zunächst wird das <code>canvas</code>-Element in der Konstanten <code>bspl1dCanvas</code> gesichert.
                                </p>
                                <h4>Die Methode <code>requestAnimationFrame()</code></h4>
                                <p>
                                    Das <code>window</code>-Objekt hält die Methode <code>requestAnimationFrame()</code> bereit und bietet, ähnlich wie <code>setTimeout()</code>, die Möglichkeit Funktionen zeitlich verzögert auszuführen. Diese Methode benötigt als <i>callback</i> ein <strong>Funktionsobjekt</strong>. (hier: Funktonsname ohne rundes Klammerpaar und Anführungszeichen.) <br>
                                    Diese ist hier die Funktion <code>redrawBspl1d()</code>
                                </p>
                                <p>
                                    Die Methode liefert als Rückgabewert eine <code>requestID</code> zurück. Diese wird (später) als Parameter f. d. Methode <code>cancelAnimationFrame()</code> benötigt um die Animation zu beenden.
                                </p>
                                <h4>Die Funktion <code>redrawBspl1d()</code></h4>
                                <p>
                                    Mithilfe der Konstanten <code>time</code> vom Typ <code>Date()</code> und desen Methoden werden die Konstanten <code>lineLength</code> und <code>lineHeight</code> initialisiert. <br>
                                    Für die Generierung einer HSL-Zufallsfarbe wird zur Ermittlung eines zufälligen Hue-Wertes auf die Funktion <code>getRandomInt()</code> zurückgegriffen.
                                </p>
                                <p>
                                    Der CanvasRenderingContext2D wird der Konstanten <code>context</code> zugewiesen und es erfolgt nach der Löschung des Canvas eine grundlegende Intialisierung der <code>context</code>-Eigenschaften <code>strokeStyle</code> und <code>fillStyle</code>, bevor dieser mittels <code>save()</code> gesichert wird.
                                </p>
                                <p>
                                    Die Nachfolgenden Anweisungen sind weitestgehend Selbsterklärend. Wichtig ist hier lediglich, dass die Veränderungen in der grafischen und textlichen Elemente des Canvas in zeitliche Abhängigkeit gebracht sind. So definiert sich die zunehmende Länge des Sekundenbalkens gemäß dem ermittelten und modifizierten Wert der Millisekunden des <code>Date()</code>-Objektes <code>time</code>.
                                </p>
                                <p>
                                    In der letzten Zeile der Funktion geschehen zwei wesentliche Dinge.
                                </p>
                                <ol>
                                    <li>
                                        Der Wert der Variablen <code>requestID</code> wird aktualisiert (um die Animation bei Bedarf mittels <code>cancelAnimationFrame()</code> beenden zu können).
                                    </li>
                                    <li>
                                        Andererseits ruft sich die Funktion selbst erneut auf damit die Animation kontinuierlich fortgesetzt wird.
                                    </li>
                                </ol>
                                <h4>Beenden d. Animation mit <code>cancelAnimationFrame()</code></h4>
                                <p>
                                    Der Button mit der ID <code>stopBspl1dAnim</code> erhält einen EventListener vom Typ <code>'click'</code> und als <i>callback</i> die Funktion <code>stopAnim1d()</code>.
                                </p>
                                <p>
                                    Die Funktion prüft zuerst ob <code>requestID</code> überhaupt initialisiert wurde. Wenn das der Fall ist wird die Methode <code>cancelAnimationFrame()</code> des <code>window</code>-Objektes aufgerufen. <br>
                                    Diese erhält als Parameter den Wert von <code>requestID</code>. Aus diesem Grund ist so wichtig, das bei jedem Aufruf von <code>requestAnimationFrame()</code> dieser Wert aktualisiert wird, da sich dieser stetig verändert.
                                </p>

                            </details>
                        </div>

                    </article>

                    <article class="demoBox" id="bsplOneE">
                        <header class="demoBoxHeader">
                            <h3 class="artTitle">Beispiel 1e</h3>
                            <div class="artSubtitle">Rundungen, Kreise und Bögen</div>
                        </header>
                        <div class="sandboxContainer">

                            <canvas id="bspl1eCanvas" width="400" height="300">
                                <p>
                                    Ihr Browser unterstützt das <code>canvas</code>-Elment nicht.
                                </p>
                            </canvas>

                        </div>
                        
                        <div class="infoBox">
                            <details>
                                <summary>

                                </summary>

                            </details>
                        </div>

                    </article>

                    <article class="demoBox" id="bsplOneX">
                        <header class="demoBoxHeader">
                            <h3 class="artTitle">Beispiel 1X</h3>
                            <div class="artSubtitle">XXX</div>
                        </header>
                        <div class="sandboxContainer">

                            <canvas id="bspl1XXXCanvas" width="400" height="300">
                                <p>
                                    Ihr Browser unterstützt das <code>canvas</code>-Elment nicht.
                                </p>
                            </canvas>

                        </div>
                        
                        <div class="infoBox">
                            <details>
                                <summary>

                                </summary>
                                
                            </details>
                        </div>

                    </article>

                </section>
    
            </main>

            <footer id="pageFooter"></footer>
        </div>

<!--                                                           Scripts -->
        <script src="src/js/main.js"></script>
    </body>

</html>
